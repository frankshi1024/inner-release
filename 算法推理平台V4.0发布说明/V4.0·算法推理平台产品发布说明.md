# 算法推理平台V4.0产品发布说明



> Powered by 极视角

| 修改日期 | 修改人 | 修改类型         | 修改说明                               |
| -------- | ------ | ---------------- | -------------------------------------- |
| 20190726 | 时建军 | 首次发布         | 首次发布基于V4.0的算法推理平台使用手册 |
| 20190829 | 时建军 | 修改部署部分内容 | 修改部署说明，链接至@灿煌维护的内容    |



> 特别声明：在V4.0以后，算法管理系统（曾命名为算法配置工具、配置工具、算法管理系统等），将正式更名为算法推理平台。
>
> 为什么重新命名为算法推理平台？
>
> 算法推理过程，在算法应用中的专业英文为inference，即为“推理“的意思。重新命名后，使得该系统的命名在实际使用场景中更贴合实际，使其业务边界与名称更加契合。
>
> 附：算法推理平台V3.6版本安装说明 https://pan.wps.cn/l/s8yyVbBoG（停止维护）



[TOC]

## 一、系统概述

算法推理平台V4.0，在前序版本的基础上，增加核心的K8S底层容器管理服务，提高了系统稳定性，增强系统交付的可靠性。

## 二、功能概述

算法推理平台V4.0（以下简称平台或系统），主要更新了两大功能：

1. 基于K8S的底层算法容器管理；
2. 基于联邦学习的分布式算法训练系统。

基于**K8S的底层容器管理**功能，实现了算法容器出现异常后的重启机制，确保算法容器的高可用；

**联邦学习**功能为基于已部署机器的算法本地化训练，可以在几乎不占用资源的情况下进行特定场景（即客户已部署的服务器上）的算法训练，提高算法精度。该功能需要联网实现，且目前支持算法数量较少，在非联网/其他条件不允许的情况下，可以在部署时跳过安装该功能。

## 三、场景化使用说明

### 1. 操作系统&推理平台代码部署

*参考文档，from灿煌

http://115.29.213.31:8088/deployment/chapter01.html

### 2. 推理平台算法客户端使用说明

请参考文档：**【BS】推理平台客户端使用手册**

### 3. 二次开发建议

#### （1）基于算法报警信息（http post）进行的二次开发

参考文档：**callback技术原理**

#### （2）基于视频类算法返回的视频分析结果进行的展示功能开发

参考文档：**演示功能开发技术建议**

## 四、其他

### 1. 端口占用说明

| 说明                                               | 端口号       |
| -------------------------------------------------- | ------------ |
| 算法推理平台网站地址                               | 80           |
| 流媒体服务                                         | 31935、30080 |
| websocket                                          | 5200         |
| K8S                                                | 30001        |
| 算法容器对外映射端口（用户自定义，请注意选择范围） | 33000～65535 |
| 本机callback地址默认端口                           | 81           |
| 预留端口                                           | 82、32766    |

### 2. 调试常用工具

| 名称                                    | 链接                                                         |      |
| --------------------------------------- | ------------------------------------------------------------ | ---- |
| 云端部署地址-可用于云端接收callback测试 | 工具访问地址： http://134.175.110.225/<br>callback地址：http://134.175.110.225/api/callback/handle |      |
| 分析视频流地址                          | rtmp://docker服务地址/echostream/摄像头id*算法id*<br>例：rtmp://192.168.1.57/echostream/911001*9510 |      |
| 缓存清理接口                            | http://192.168.1.68/api/algo-tool/cleanData?days=1<br>清理days= n天之前的数据，默认清理30天之前的数据 |      |
| callback默认返回地址                    | http://ip/api/callback/handle                                |      |
| 流媒体服务状态                          | http://192.168.1.68:8000/stat                                |      |
| 开源组件——点线框绘制组件                | 在线体验地址：http://dev.polygonlinepointtool.extremevision.com.cn开源说明文档：https://www.npmjs.com/package/poly-line-point |      |

